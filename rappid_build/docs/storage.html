<!DOCTYPE html>
<html class="no-js">
<head>
    <meta http-equiv="x-ua-compatible" content="IE=Edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/prism.css">
    <link rel="stylesheet" type="text/css" href="css/api.css">
    <title>Rappid - storage</title>
</head>
<body data-name="storage">

<div class="docs-main">
    <nav class="docs-nav">
        <input class="docs-nav-search" type="text" placeholder="i.e. scroller">
        <img class="docs-nav-search-clear" src="./images/clear.png" title="Clear Search">
            <ul class="docs-nav-items">
                <li class="docs-nav-item" data-name="index">
                </li>
                <li class="docs-nav-item" data-name="alg">
                    <a class="docs-nav-item-link" href="alg.html">alg</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="alg.Dijkstra">
                                    <a class="docs-nav-item-link" href="alg.html#alg.Dijkstra">Dijkstra</a>
                                </li>
                                <li class="docs-nav-item" data-name="alg.PriorityQueue">
                                    <a class="docs-nav-item-link" href="alg.html#alg.PriorityQueue">PriorityQueue</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="com">
                    <a class="docs-nav-item-link" href="com.html">com</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="com.Channel">
                                    <a class="docs-nav-item-link" href="com.html#com.Channel">Channel</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="dia">
                    <a class="docs-nav-item-link" href="dia.html">dia</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="dia.CommandManager">
                                    <a class="docs-nav-item-link" href="dia.html#dia.CommandManager">CommandManager</a>
                                </li>
                                <li class="docs-nav-item" data-name="dia.GraphUtils">
                                    <a class="docs-nav-item-link" href="dia.html#dia.GraphUtils">GraphUtils</a>
                                </li>
                                <li class="docs-nav-item" data-name="dia.Validator">
                                    <a class="docs-nav-item-link" href="dia.html#dia.Validator">Validator</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="format">
                    <a class="docs-nav-item-link" href="format.html">format</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="format.GEXF">
                                    <a class="docs-nav-item-link" href="format.html#format.GEXF">GEXF</a>
                                </li>
                                <li class="docs-nav-item" data-name="format.Print">
                                    <a class="docs-nav-item-link" href="format.html#format.Print">Print</a>
                                </li>
                                <li class="docs-nav-item" data-name="format.Raster">
                                    <a class="docs-nav-item-link" href="format.html#format.Raster">Raster</a>
                                </li>
                                <li class="docs-nav-item" data-name="format.SVG">
                                    <a class="docs-nav-item-link" href="format.html#format.SVG">SVG</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="layout">
                    <a class="docs-nav-item-link" href="layout.html">layout</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="layout.ForceDirected">
                                    <a class="docs-nav-item-link" href="layout.html#layout.ForceDirected">ForceDirected</a>
                                </li>
                                <li class="docs-nav-item" data-name="layout.GridLayout">
                                    <a class="docs-nav-item-link" href="layout.html#layout.GridLayout">GridLayout</a>
                                </li>
                                <li class="docs-nav-item" data-name="layout.TreeLayout">
                                    <a class="docs-nav-item-link" href="layout.html#layout.TreeLayout">TreeLayout</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="shapes">
                    <a class="docs-nav-item-link" href="shapes.html">shapes</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="shapes.bpmn">
                                    <a class="docs-nav-item-link" href="shapes.html#shapes.bpmn">bpmn</a>
                                </li>
                                <li class="docs-nav-item" data-name="shapes.chart">
                                    <a class="docs-nav-item-link" href="shapes.html#shapes.chart">chart</a>
                                            <ul class="docs-nav-items">
                                                <li class="docs-nav-item" data-name="shapes.chart.knob">
                                                    <a class="docs-nav-item-link" href="shapes.html#shapes.chart.knob">knob</a>
                                                </li>
                                                <li class="docs-nav-item" data-name="shapes.chart.matrix">
                                                    <a class="docs-nav-item-link" href="shapes.html#shapes.chart.matrix">matrix</a>
                                                </li>
                                                <li class="docs-nav-item" data-name="shapes.chart.pie">
                                                    <a class="docs-nav-item-link" href="shapes.html#shapes.chart.pie">pie</a>
                                                </li>
                                                <li class="docs-nav-item" data-name="shapes.chart.plot">
                                                    <a class="docs-nav-item-link" href="shapes.html#shapes.chart.plot">plot</a>
                                                </li>
                                            </ul>        </li>
                            </ul>        </li>
                <li class="docs-nav-item open" data-name="storage">
                    <a class="docs-nav-item-link" href="storage.html">storage</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="storage.Local">
                                    <a class="docs-nav-item-link" href="storage.html#storage.Local">Local</a>
                                </li>
                            </ul>        </li>
                <li class="docs-nav-item" data-name="ui">
                    <a class="docs-nav-item-link" href="ui.html">ui</a>
                            <ul class="docs-nav-items">
                                <li class="docs-nav-item" data-name="ui.intro">
                                </li>
                                <li class="docs-nav-item" data-name="ui.Clipboard">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Clipboard">Clipboard</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.ColorPalette">
                                    <a class="docs-nav-item-link" href="ui.html#ui.ColorPalette">ColorPalette</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.ContextToolbar">
                                    <a class="docs-nav-item-link" href="ui.html#ui.ContextToolbar">ContextToolbar</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Dialog">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Dialog">Dialog</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.FlashMessage">
                                    <a class="docs-nav-item-link" href="ui.html#ui.FlashMessage">FlashMessage</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.FreeTransform">
                                    <a class="docs-nav-item-link" href="ui.html#ui.FreeTransform">FreeTransform</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Halo">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Halo">Halo</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Inspector">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Inspector">Inspector</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Keyboard">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Keyboard">Keyboard</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Lightbox">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Lightbox">Lightbox</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Navigator">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Navigator">Navigator</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.PaperScroller">
                                    <a class="docs-nav-item-link" href="ui.html#ui.PaperScroller">PaperScroller</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Popup">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Popup">Popup</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.SelectBox">
                                    <a class="docs-nav-item-link" href="ui.html#ui.SelectBox">SelectBox</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.SelectButtonGroup">
                                    <a class="docs-nav-item-link" href="ui.html#ui.SelectButtonGroup">SelectButtonGroup</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Selection">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Selection">Selection</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Snaplines">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Snaplines">Snaplines</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Stencil">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Stencil">Stencil</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.TextEditor">
                                    <a class="docs-nav-item-link" href="ui.html#ui.TextEditor">TextEditor</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Toolbar">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Toolbar">Toolbar</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.Tooltip">
                                    <a class="docs-nav-item-link" href="ui.html#ui.Tooltip">Tooltip</a>
                                </li>
                                <li class="docs-nav-item" data-name="ui.TreeLayoutView">
                                    <a class="docs-nav-item-link" href="ui.html#ui.TreeLayoutView">TreeLayoutView</a>
                                </li>
                            </ul>        </li>
            </ul>    </nav>
    <section class="docs-content">
        <h1 class="docs-header">Rappid - storage</h1>
        
        <div class="docs-items">
            
    <div id="storage" class="docs-item">
    <div id="storage.Local" class="docs-item">
        <a href="#storage.Local" class="docs-item-anchor">
            <h3 class="docs-item-header">storage.Local</h3>
        </a>
        <div class="docs-item-content">
<p><code class="highlighted">storage<span class="token punctuation">.</span>Local</code> plugin gives you a convenient way to <b>store documents</b> (especially JointJS graphs and cells) to the
  <b>client-side</b> <a href="https://developer.mozilla.org/en/docs/Web/Guide/API/DOM/Storage#localStorage">HTML 5 localStorage</a>.
  This browser storage allows you to store data in the browser similar to cookies but with a greatly enhanced capacity and no information
  stored in the HTTP request header.
</p>

<p>
  The standard HTML 5 localStorage is a simple key-value store where both keys and values are strings. Therefore,
  it is on the programmer to invent a way of storing and retrieving more complex data structures. <code class="highlighted">storage<span class="token punctuation">.</span>Local</code>
  make this abstraction for you and its API, though overly simplified, resembles APIs for common
  NoSQL document object stores such as MongoDB.
</p>
 
<h3 id="storage.Local.installation">Install</h3>

<p>Include <code class="highlighted">joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span>js</code> file into your HTML:</p>
<pre><code data-lang="html" class="highlighted"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>joint.storage.local.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>

<h3 id="storage.Local.usage">Usage</h3>

<p><code class="highlighted">joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local</code> is a singleton object with three basic methods: <code class="highlighted"><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>,
<code class="highlighted"><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> and <code class="highlighted"><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>. It behaves like a single database with collections of objects.
You can add, remove and search objects in each collection. Objects can be any JavaScript objects
or JointJS elements, links or graphs. Currently, <code class="highlighted">joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local</code> indexes objects
in collections by their IDs only. It is important to note that all the methods are asynchronous. This means
that the callback is defered until the current JavaScript call stack has cleared (similar to setTimeout with a delay of 0).
This is because we want to keep the API similar to other NoSQL databases and so if you later decide
to store your documents in e.g. MongoDB instead, you don&apos;t have to make drastic changes to your application.
Instead, you can just write a simple replacement for <code class="highlighted">joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local</code> and store
your documents e.g. via AJAX on the server.
</p>

<pre><code class="highlighted"><span class="token keyword">var</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">joint<span class="token punctuation">.</span>dia<span class="token punctuation">.</span>Graph</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">joint<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>Rect</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Insert a graph into the collection &apos;graphs&apos;.</span>
joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&apos;graphs&apos;</span><span class="token punctuation">,</span> graph<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Find all the graphs in the collection &apos;graphs&apos;.</span>
joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;graphs&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> graphs<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Find a graph with ID &apos;mygraph&apos; in the collection &apos;graphs&apos;.</span>
joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;graphs&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">&apos;mygraph&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> graphs<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Remove all the graphs from the collection &apos;graphs&apos;.</span>
joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&apos;graphs&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Remove a graph from the collection &apos;graphs&apos;.</span>
joint<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>Local<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&apos;graphs&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">&apos;mygraph&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h3 id="storage.Local.api">API</h3>

<table>
    <tr>
        <th>insert(collection, doc [, callback])</th>
        <td>Insert a document <code class="highlighted">doc</code> into the <code class="highlighted">collection</code>. Optionally
          pass a <code class="highlighted"><span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span></code>. If the document <code class="highlighted">doc</code> didn&apos;t have
          an <code class="highlighted">id</code> property, one is automatically created and will be part of the
          <code class="highlighted">doc</code> object returned in the callback.
        </td>
    </tr>
    <tr>
        <th>find(collection, query, callback)</th>
        <td>Find a document in <code class="highlighted">collection</code>.
          <code class="highlighted">query</code> can currently be either empty in which case all the
          documents from the <code class="highlighted">collection</code> are returned or it can contain <code class="highlighted">id</code>
          of a document in which case only a document with that <code class="highlighted">id</code> is returned.
          <code class="highlighted">callback</code> signature is: <code class="highlighted"><span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> docs<span class="token punctuation">)</span></code>.
        </td>
    </tr>
    <tr>
        <th>remove(collection, query [, callback])</th>
        <td>
          Remove a document from the <code class="highlighted">collection</code>. <code class="highlighted">query</code> can currently be either empty
          in which case all the documents from the <code class="highlighted">collection</code> are removed
          or it can contain an <code class="highlighted">id</code> of the document to be removed.
          <code class="highlighted">callback</code> signature is: <code class="highlighted"><span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></code>.
        </td>
    </tr>
</table>

        </div>
    </div>
    </div>
        </div>
    </section>
</div>

<script src="js/api.js"></script>

</body>
</html>